<div class="modal-header d-flex justify-content-center">
  <p class="heading">Cập nhật nhân viên</p>
  <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="modalRef.hide()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body mx-3 row">

  <div class="md-form mt-1 mb-3 col-md-12">
    <mdb-select [label]="'Chức vụ'" [notFoundMsg]="'Không tìm thấy'" [label]="'Chức vụ'" [options]="roleList"
      [(ngModel)]="employee.roleId"></mdb-select>
  </div>

  <div class="md-form mt-1 mb-3 col-md-12" *ngIf="employee.roleId === 3">
    <mdb-select [label]="'Người quản lý'" [notFoundMsg]="'Không tìm thấy'" [label]="'Người quản lý'"
      [options]="managerList" [(ngModel)]="employee.managerId"></mdb-select>
  </div>

  <div class="md-form mt-1 mb-3 col-md-12" *ngIf="employee.roleId === 2">
    <input type="text" id="email" class="form-control" mdbInput [(ngModel)]="employee.email" (blur)="checkEmailExist()"
      #email=ngModel disabled [class.has-error]="isExist">
    <label for="email">Email</label>
    <mdb-error *ngIf="isExist">
      <p class="font-weight-bold">Email đã tồn tại</p>
    </mdb-error>
  </div>

  <div class="md-form mt-1 mb-3 col-md-12">
    <input type="text" id="employeeId" class="form-control" mdbInput [(ngModel)]="employee.employeeId">
    <label for="userName">Mã số nhân viên</label>
  </div>

  <div class="md-form mt-1 mb-3 col-md-6">
    <input type="text" id="firstName" class="form-control" mdbInput [(ngModel)]="employee.firstName">
    <label for="firstName">Họ</label>
  </div>

  <div class="md-form mt-1 mb-3 col-md-6">
    <input type="text" id="lastName" class="form-control" mdbInput [(ngModel)]="employee.lastName">
    <label for="lastName">Tên</label>
  </div>

  <div class="md-form mt-1 mb-3 col-md-6 ">
    <mdb-select [label]="'Giới tính'" [options]="optionsSex" id="gender" [(ngModel)]="gender">
    </mdb-select>
  </div>

  <div class="md-form mt-1 mb-3 col-md-6">
    <input type="text" id="phoneNumber" class="form-control" mdbInput [(ngModel)]="employee.phoneNumber" disabled>
    <label for="phoneNumber">Số điện thoại</label>
  </div>

  <owl-form-field class="col-md-6">
    <input owlInput [owlDateTimeTrigger]="datepicker" [owlDateTime]="datepicker" placeholder="Sinh nhật"
      [(ngModel)]="employee.birthDate">
    <owl-date-time #datepicker [pickerType]="'calendar'"></owl-date-time>
  </owl-form-field>

  <div class="md-form mt-1 mb-3 col-md-6">
    <input type="text" id="macAddress" class="form-control" mdbInput [(ngModel)]="employee.phoneMacAddress">
    <label for="macAddress">Địa chỉ MAC</label>
  </div>

  <div class="col-md-12">
    <div class="md-form mt-0 mb-3 form-inline mr-auto w-100">

      <!-- <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search"> -->

      <input type="text" [ngModel]="employee.address" (ngModelChange)='changeAddress($event)'
        class="form-control mr-sm-2" id="searchField" mdbInput>
      <label for="searchField">Địa chỉ</label>
      <button mdbBtn size="sm" color="primary" rounded="true" class="my-0 waves-light" mdbWavesEffect type="submit"
        (click)='updateOnMap()'>
        <i class="fa fa-search"></i>
      </button>

    </div>
  </div>

  <div class="col-md-12">
    <agm-map #map [mapTypeId]="'terrain'" [latitude]="employee.latitude" [longitude]="employee.longitude"
      [zoom]="location.zoom" style="height: 300px">
      <agm-marker [latitude]="employee.latitude" [longitude]="employee.longitude"></agm-marker>
    </agm-map>
  </div>

  <div class="file-field md-form col-12 pl-0 mt-1 mb-3">
    <div mdbBtn floating="true" size="md" color="blue" mdbWavesEffect>
      <i class="fa fa-cloud-upload" aria-hidden="true"></i>
      <input type="file" accept="image/*" (change)="onSelectFile($event)" mdbFileSelect
        (uploadOutput)="onUploadOutput($event)" [uploadInput]="uploadInput">
    </div>
    <div class="file-path-wrapper mt-3">
      <input class="file-path" type="text" placeholder="Chọn ảnh đại diện" [value]="showFiles()">
    </div>
  </div>
  <div class="col text-center w-100" *ngIf="employee.picture || url">
    <img [src]="employee.picture || url" height="150">
  </div>

</div>
<div class="modal-footer d-flex justify-content-center">
  <button mdbBtn color="primary" class="waves-light" mdbWavesEffect (click)="updateEmployee()">Cập nhật
    <i class="fa fa-check ml-1"></i>
  </button>
</div>