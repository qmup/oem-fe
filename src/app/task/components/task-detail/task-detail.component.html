<div class="row" id="task-detail">
  <div class="col pt-3">
    <!-- <h4 class="text-center">Search Filter here</h4> -->
    <div class="d-flex flex-wrap">
      <div class="col-md-3 mx-auto">
        <!--Card content-->
        <mdb-card-body>

          <!--Title-->
          <h4 class="text-center font-weight-bold">Danh sách công việc</h4>

          <hr>
          <!--Text-->
          <ul class="list-group list-group-flush pt-3">
            <!-- <a class="list-group-item active waves-light">92</a> -->
            <a *ngFor="let task of taskList; let i = index" class="list-group-item list-group-item-action waves-light"
              [ngClass]="{'list-group-item-action': task.id !== id, 'active': task.id === id}" mdbWavesEffect (click)="loadTask(task.id)">{{i+1}}.
              {{task.title}}</a>
          </ul>

        </mdb-card-body>
      </div>
      <div class="card card-cascade narrower col-md-5 mx-auto waves-light">
        <div class="p-5 h-100">
          <div class="mx-auto col-8">
            <div class="view view-cascade gradient-card-header light-blue" style="margin-top: -5.25rem">
              <h2 class="h2-responsive mb-0">Chi tiết công việc</h2>
            </div>
          </div>
          <!-- {{task.startTime | date: 'medium'}} -->
          <p class="h3 mt-3">{{task.title}} </p>
          <p class="h6 col-12 pl-0 mt-4">Miêu tả công việc</p>
          <div class="md-form" *ngIf="isUpdate">
            <textarea type="text" id="description" class="md-textarea form-control" mdbInputDirective [disabled]="!isUpdate">{{task.description}}</textarea>
          </div>
          <label *ngIf="!isUpdate">{{task.description}}</label>
          <div class="col-md-12 mt-3">
            <h5 class="text-center">Công việc phải làm </h5>
            <div class="d-flex flex-wrap">
              <mdb-checkbox *ngFor="let ck of task.checkList" [inline]="true" class="col-6" [checked]="ck.status"
                [disabled]="!isUpdate">{{ck.title}}</mdb-checkbox>
            </div>
          </div>
          <mdb-accordion [multiple]="false" aria-multiselectable="true">
            <mdb-accordion-item [collapsed]="true" *ngFor="let item of report">
              <mdb-accordion-item-head> {{ item.dateReport | date: 'hh-mm dd-MM-yyyy' }} </mdb-accordion-item-head>
              <mdb-accordion-item-body>
                <p class="h6 mt-4">Hình ảnh</p>
                <p class="text-danger" *ngIf="picture.length === 0">Không có hình ảnh</p>
                <div class="col-md-12" *ngIf="picture.length > 0">
                  <div id="mdb-lightbox-ui"></div>
                  <div class="mdb-lightbox">
                    <figure class="col-md-4" *ngFor="let p of picture">
                      <a [href]="p" data-size="1600x1067">
                        <img [src]="p" alt="placeholder" class="img-fluid">
                      </a>
                    </figure>
                  </div>
                </div>
              </mdb-accordion-item-body>
            </mdb-accordion-item>
          </mdb-accordion>
          <br>
          <button *ngIf="!isUpdate" class="btn-edit" mdbBtn type="button" color="primary" rounded="true" mdbWavesEffect
            (click)="isUpdate = true">Chỉnh sửa</button>
          <button *ngIf="!isUpdate" class="btn-delete" mdbBtn type="button" color="danger" rounded="true"
            mdbWavesEffect (click)="removeTask()">Xoá</button>
          <button *ngIf="isUpdate" class="btn-confirm" mdbBtn type="button" color="success" rounded="true"
            mdbWavesEffect (click)="updateTask()">Xác nhận</button>
          <button *ngIf="isUpdate" class="btn-close" mdbBtn type="button" color="light" rounded="true" mdbWavesEffect
            (click)="isUpdate = false">Hủy</button>
        </div>
      </div>
      <div class="col-md-3 mx-auto">
        <div style="position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%); width: 80%">

          <div class="md-form ">
            <h6 class="font-weight-bold">Trạng thái</h6>
            <mdb-select *ngIf="isUpdate" [options]="iconStatusSelect" [(ngModel)]="task.status" class="select-wrapper mdb-select colorful-select dropdown-info md-form">
            </mdb-select>
            <div *ngIf="!isUpdate" class="mx-3">
              <span *ngIf="task.status === 0" style="font-size: 15px" class="badge badge-light">Chưa bắt đầu</span>
              <span *ngIf="task.status === 1" style="font-size: 15px" class="badge badge-primary">Đang thực hiện</span>
              <span *ngIf="task.status === 2" style="font-size: 15px" class="badge badge-success">Hoàn thành</span>
              <span *ngIf="task.status === 3" style="font-size: 15px" class="badge badge-danger">Quá hạn</span>
            </div>
          </div>

          <div class="md-form ">
            <p class="h6 mt-3">Người thực hiện</p>
            <span *ngIf="!isUpdate" class="mx-3">{{task.assignee.name}}</span>
            <mdb-select *ngIf="isUpdate" [placeholder]="'Người thực hiện'" [options]="employeeList" [filterEnabled]="true"
              [(ngModel)]="assignTask.assigneeId"></mdb-select>
          </div>

          <div class="md-form ">
            <p class="h6 mt-3">Nơi làm việc</p>
            <span class="mx-3" *ngIf="!isUpdate">{{task.workplace.name}}</span>
            <mdb-select *ngIf="isUpdate" [placeholder]="'Nơi làm việc'" [options]="workplaceListByManager"
              [filterEnabled]="true" [(ngModel)]="manageWorkplace.workplaceId"></mdb-select>
          </div>

          <div class="md-form ">
            <p class="h6 mt-3 mb-4">Thời gian</p>
            <div class="col-12 mx-0" *ngIf="!isUpdate">Từ: <span>{{task.startTime | date: 'HH:mm dd-MM-yyyy'}}</span></div>
            <div class="col-12 mx-0" *ngIf="!isUpdate">Đến: <span>{{task.endTime | date: 'HH:mm dd-MM-yyyy'}}</span></div>
            <div class="row" *ngIf="isUpdate">
              <owl-form-field class="w-100 px-3 text-center">
                <input owlInput [(ngModel)]="dateRange" [selectMode]="'range'" [owlDateTimeTrigger]="dtPicker3"
                  [owlDateTime]="dtPicker3">
                <owl-date-time #dtPicker3></owl-date-time>
              </owl-form-field>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>